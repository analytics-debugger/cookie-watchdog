{"version":3,"file":"cookie-watchdog.cjs.js","sources":["../node_modules/.pnpm/cookie-store@4.0.0-next.4/node_modules/cookie-store/dist/index.js","../src/index.js"],"sourcesContent":["/*!\n  * Cookie-store v4.0.0-next.4\n  * https://github.com/markcellus/cookie-store\n  *\n  * Copyright (c) 2023 Mark\n  * Licensed under the MIT license\n */\n\nconst decode = decodeURIComponent;\nconst pairSplitRegExp = /; */;\n// Try decoding a string using a decoding function.\nfunction tryDecode(str, decode) {\n    try {\n        return typeof decode === 'boolean' ? decodeURIComponent(str) : decode(str);\n    }\n    catch (e) {\n        return str;\n    }\n}\nvar CookieSameSite;\n(function (CookieSameSite) {\n    CookieSameSite[\"strict\"] = \"strict\";\n    CookieSameSite[\"lax\"] = \"lax\";\n    CookieSameSite[\"none\"] = \"none\";\n})(CookieSameSite || (CookieSameSite = {}));\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n */\nfunction parse(str, options = {}) {\n    if (typeof str !== 'string') {\n        throw new TypeError('argument str must be a string');\n    }\n    const obj = [];\n    const opt = options || {};\n    const pairs = str.split(pairSplitRegExp);\n    const dec = opt.decode || decode;\n    for (let i = 0; i < pairs.length; i++) {\n        const pair = pairs[i];\n        let eqIdx = pair.indexOf('=');\n        // skip things that don't look like key=value\n        if (eqIdx < 0) {\n            continue;\n        }\n        const key = pair.substr(0, eqIdx).trim();\n        let val = pair.substr(++eqIdx, pair.length).trim();\n        // quoted values\n        if ('\"' == val[0]) {\n            val = val.slice(1, -1);\n        }\n        // only assign once\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        if (undefined == obj[key]) {\n            obj.push({\n                name: key,\n                value: tryDecode(val, dec),\n            });\n        }\n    }\n    return obj;\n}\nclass CookieChangeEvent extends Event {\n    constructor(type, eventInitDict = { changed: [], deleted: [] }) {\n        super(type, eventInitDict);\n        this.changed = eventInitDict.changed || [];\n        this.deleted = eventInitDict.deleted || [];\n    }\n}\nclass CookieStore extends EventTarget {\n    constructor() {\n        super();\n        throw new TypeError('Illegal Constructor');\n    }\n    get [Symbol.toStringTag]() {\n        return 'CookieStore';\n    }\n    async get(init) {\n        if (init == null) {\n            throw new TypeError('CookieStoreGetOptions must not be empty');\n        }\n        else if (init instanceof Object && !Object.keys(init).length) {\n            throw new TypeError('CookieStoreGetOptions must not be empty');\n        }\n        return (await this.getAll(init))[0];\n    }\n    async set(init, possibleValue) {\n        var _a, _b, _c;\n        const item = {\n            name: '',\n            value: '',\n            path: '/',\n            secure: false,\n            sameSite: CookieSameSite.strict,\n            expires: null,\n            domain: null,\n        };\n        if (typeof init === 'string') {\n            item.name = init;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            item.value = possibleValue;\n        }\n        else {\n            Object.assign(item, init);\n            if (item.path && !item.path.startsWith('/')) {\n                throw new TypeError('Cookie path must start with \"/\"');\n            }\n            if ((_a = item.domain) === null || _a === void 0 ? void 0 : _a.startsWith('.')) {\n                throw new TypeError('Cookie domain cannot start with \".\"');\n            }\n            if (item.domain && item.domain !== window.location.hostname) {\n                throw new TypeError('Cookie domain must domain-match current host');\n            }\n            if (((_b = item.name) === null || _b === void 0 ? void 0 : _b.startsWith('__Host')) && item.domain) {\n                throw new TypeError('Cookie domain must not be specified for host cookies');\n            }\n            if (((_c = item.name) === null || _c === void 0 ? void 0 : _c.startsWith('__Host')) && item.path != '/') {\n                throw new TypeError('Cookie path must not be specified for host cookies');\n            }\n            if (item.path && item.path.endsWith('/')) {\n                item.path = item.path.slice(0, -1);\n            }\n            if (item.path === '') {\n                item.path = '/';\n            }\n        }\n        if (item.name === '' && item.value && item.value.includes('=')) {\n            throw new TypeError(\"Cookie value cannot contain '=' if the name is empty\");\n        }\n        if (item.name && item.name.startsWith('__Host')) {\n            item.secure = true;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        let cookieString = `${item.name}=${encodeURIComponent(item.value)}`;\n        if (item.domain) {\n            cookieString += '; Domain=' + item.domain;\n        }\n        if (item.path) {\n            cookieString += '; Path=' + item.path;\n        }\n        if (typeof item.expires === 'number') {\n            cookieString += '; Expires=' + new Date(item.expires).toUTCString();\n        }\n        else if (item.expires instanceof Date) {\n            cookieString += '; Expires=' + item.expires.toUTCString();\n        }\n        if ((item.name && item.name.startsWith('__Secure')) || item.secure) {\n            item.sameSite = CookieSameSite.lax;\n            cookieString += '; Secure';\n        }\n        switch (item.sameSite) {\n            case CookieSameSite.lax:\n                cookieString += '; SameSite=Lax';\n                break;\n            case CookieSameSite.strict:\n                cookieString += '; SameSite=Strict';\n                break;\n            case CookieSameSite.none:\n                cookieString += '; SameSite=None';\n                break;\n        }\n        const previousCookie = this.get(item);\n        document.cookie = cookieString;\n        if (this.onchange) {\n            const changed = [];\n            const deleted = [];\n            if (previousCookie && !(await this.get(item))) {\n                deleted.push({ ...item, value: undefined });\n            }\n            else {\n                changed.push(item);\n            }\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            const event = new CookieChangeEvent('change', { changed, deleted });\n            this.onchange(event);\n        }\n    }\n    async getAll(init) {\n        const cookies = parse(document.cookie);\n        if (init == null || Object.keys(init).length === 0) {\n            return cookies;\n        }\n        let name;\n        let url;\n        if (typeof init === 'string') {\n            name = init;\n        }\n        else {\n            name = init.name;\n            url = init.url;\n        }\n        if (url) {\n            const parsedURL = new URL(url, window.location.origin);\n            if (window.location.href !== parsedURL.href ||\n                window.location.origin !== parsedURL.origin) {\n                throw new TypeError('URL must match the document URL');\n            }\n            return cookies.slice(0, 1);\n        }\n        return cookies.filter((cookie) => cookie.name === name);\n    }\n    async delete(init) {\n        const item = {\n            name: '',\n            value: '',\n            path: '/',\n            secure: false,\n            sameSite: CookieSameSite.strict,\n            expires: null,\n            domain: null,\n        };\n        if (typeof init === 'string') {\n            item.name = init;\n        }\n        else {\n            Object.assign(item, init);\n        }\n        item.expires = 0;\n        await this.set(item);\n    }\n}\nconst workerSubscriptions = new WeakMap();\nconst registrations = new WeakMap();\nclass CookieStoreManager {\n    get [Symbol.toStringTag]() {\n        return 'CookieStoreManager';\n    }\n    constructor() {\n        throw new TypeError('Illegal Constructor');\n    }\n    async subscribe(subscriptions) {\n        const currentSubcriptions = workerSubscriptions.get(this) || [];\n        const worker = registrations.get(this);\n        if (!worker)\n            throw new TypeError('Illegal invocation');\n        for (const subscription of subscriptions) {\n            const name = subscription.name;\n            const url = new URL(subscription.url || '', worker.scope).toString();\n            if (currentSubcriptions.some((x) => x.name === name && x.url === url))\n                continue;\n            currentSubcriptions.push({\n                name: subscription.name,\n                url,\n            });\n        }\n        workerSubscriptions.set(this, currentSubcriptions);\n    }\n    async getSubscriptions() {\n        return (workerSubscriptions.get(this) || []).map(({ name, url }) => ({\n            name,\n            url,\n        }));\n    }\n    async unsubscribe(subscriptions) {\n        let currentSubcriptions = workerSubscriptions.get(this) || [];\n        const worker = registrations.get(this);\n        if (!worker)\n            throw new TypeError('Illegal invocation');\n        for (const subscription of subscriptions) {\n            const name = subscription.name;\n            // TODO: Parse the url with the relevant settings objects API base URL.\n            // https://wicg.github.io/cookie-store/#CookieStoreManager-unsubscribe\n            const url = new URL(subscription.url || '', worker.scope).toString();\n            currentSubcriptions = currentSubcriptions.filter((x) => {\n                if (x.name !== name)\n                    return true;\n                if (x.url !== url)\n                    return true;\n                return false;\n            });\n        }\n        workerSubscriptions.set(this, currentSubcriptions);\n    }\n}\nif (!('cookies' in ServiceWorkerRegistration.prototype)) {\n    Object.defineProperty(ServiceWorkerRegistration.prototype, 'cookies', {\n        configurable: true,\n        enumerable: true,\n        get() {\n            const manager = Object.create(CookieStoreManager.prototype);\n            registrations.set(manager, this);\n            Object.defineProperty(this, 'cookies', { value: manager });\n            return manager;\n        },\n    });\n}\nconst cookieStore = Object.create(CookieStore.prototype);\nexport { cookieStore, CookieStore, CookieChangeEvent };\n","import {\r\n    cookieStore as cookieStorePolyfill,\r\n    CookieStore as CookieStorePolyfill,\r\n    CookieChangeEvent as CookieChangeEventPolyfill,\r\n} from 'cookie-store';\r\n\r\nconst CookieWatchdog = {\r\n    // Internal state: Maps to store cookies and respective callbacks\r\n    watchers: new Map(),\r\n\r\n    // Internal: Check for cookieStore API support in the current environment\r\n    checkCookieStoreApi() {\r\n        if (typeof window === 'undefined' || !(\"cookieStore\" in window)) {\r\n            console.error(\"cookieStore API is not supported in this browser.\");\r\n            window.cookieStore = cookieStorePolyfill\r\n            window.CookieStore = CookieStorePolyfill\r\n            window.CookieChangeEvent = CookieChangeEventPolyfill\r\n        }\r\n        return true;\r\n    },\r\n\r\n    // Internal: Get the value of a specific cookie\r\n    getCookie(name) {\r\n        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\r\n        return match ? decodeURIComponent(match[2]) : null;\r\n    },\r\n\r\n    watch(cookieName, callback, options = { untilReady: false }) {\r\n        const listener = (event) => {\r\n            const filteredChanges = event.changed.filter(cookie => this.watchers.has(cookie.name));\r\n            const filteredDeletions = event.deleted.filter(cookie => this.watchers.has(cookie.name));\r\n            if (filteredChanges.length > 0) {\r\n                filteredChanges.forEach(change => {\r\n                    const currentValue = this.watchers.get(change.name);\r\n                    const actionType = currentValue.value === change.value ? 'unchanged' : (currentValue.value === null ? 'created' : 'updated');\r\n\r\n                    callback({\r\n                        name: change.name,\r\n                        value: change.value,\r\n                        type: actionType\r\n                    });\r\n\r\n                    if (currentValue.options?.untilReady && actionType === \"created\") {\r\n                        this.unwatch(change.name);\r\n                    }\r\n\r\n                    currentValue.value = change.value;\r\n                    this.watchers.set(change.name, currentValue);\r\n                });\r\n            }\r\n            if (filteredDeletions.length > 0) {\r\n                filteredDeletions.forEach(change => {\r\n                    const currentValue = this.watchers.get(change.name);\r\n                    currentValue.value = null;\r\n                    callback({\r\n                        name: change.name,\r\n                        value: change.value,\r\n                        type: 'deleted'\r\n                    });\r\n                    this.watchers.set(change.name, currentValue);\r\n                });\r\n            }\r\n        };\r\n        if (typeof window === 'undefined') {\r\n            throw new Error('This needs to run in a browser.');\r\n        }\r\n\r\n        if (typeof callback !== 'function') {\r\n            throw new Error(`The callback for ${cookieName} must be a function.`);\r\n        }\r\n\r\n        if (!this.checkCookieStoreApi()) {\r\n            throw new Error('cookieStore API not available');\r\n        }\r\n\r\n        // Save listener function as a property of CookieWatchdog to reference it later\r\n        this.listener = listener;\r\n\r\n        // Add global listener if it's the first watcher\r\n        if (this.watchers.size === 0) {\r\n            window.cookieStore.addEventListener('change', this.listener);\r\n        }\r\n\r\n        const watcherPointer = this.watchers.get(cookieName);\r\n\r\n        if (watcherPointer) {\r\n            throw new Error(`A listener already exists for the cookie: ${cookieName}`);\r\n        } else {\r\n            const currentCookieValue = this.getCookie(cookieName);\r\n            this.watchers.set(cookieName, {\r\n                value: currentCookieValue,\r\n                callback: callback,\r\n                options: options\r\n            });\r\n\r\n            callback({\r\n                name: cookieName,\r\n                value: currentCookieValue,\r\n                type: currentCookieValue !== null ? 'existing' : 'missing',\r\n            });\r\n\r\n            if (currentCookieValue !== null && options?.untilReady) {\r\n                this.unwatch(cookieName);\r\n            }\r\n        }\r\n    },\r\n\r\n    // Public: Stop watching a specific cookie\r\n    unwatch(cookieName) {\r\n        if (typeof window === 'undefined') return;\r\n\r\n        if (this.watchers.has(cookieName)) {\r\n            console.log(\"REMOVING LISTENER FOR COOKIE\", cookieName);\r\n            this.watchers.delete(cookieName);\r\n\r\n            if (this.watchers.size === 0) {\r\n                console.log(\"REMOVE GLOBAL LISTENER \");\r\n                window.cookieStore.removeEventListener(\"change\", this.listener);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n// Expose the public methods for external use\r\nexport default {\r\n    watch: CookieWatchdog.watch.bind(CookieWatchdog),\r\n    unwatch: CookieWatchdog.unwatch.bind(CookieWatchdog)\r\n};\r\n"],"names":["CookieWatchdog","watchers","Map","checkCookieStoreApi","window","console","error","cookieStore","cookieStorePolyfill","CookieStore","CookieStorePolyfill","CookieChangeEvent","CookieChangeEventPolyfill","getCookie","name","match","document","cookie","RegExp","decodeURIComponent","watch","cookieName","callback","options","arguments","length","undefined","untilReady","listener","event","filteredChanges","changed","filter","has","filteredDeletions","deleted","forEach","change","currentValue","get","actionType","value","type","unwatch","set","Error","size","addEventListener","watcherPointer","currentCookieValue","log","delete","removeEventListener","bind"],"mappings":"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","x_google_ignoreList":[0]}